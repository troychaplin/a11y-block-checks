(()=>{"use strict";const e=window.wp.i18n,i=window.wp.hooks,t=window.wp.compose,a=window.wp.blockEditor,c=window.wp.components;(0,i.addFilter)("blocks.registerBlockType","block-accessibility-checks/add-image-attribute",(function(e){return"core/image"!==e.name||(e.attributes=Object.assign(e.attributes,{isDecorative:{type:"boolean",default:!1}})),e}));var r=(0,t.createHigherOrderComponent)((function(i){return function(t){if("core/image"!==t.name)return React.createElement(i,t);var r=t.attributes,s=t.setAttributes,n=r.isDecorative;return React.createElement(React.Fragment,null,React.createElement(a.InspectorControls,null,React.createElement(c.PanelBody,{title:(0,e.__)("Accessibility Settings","block-accessibility-checks"),initialOpen:!0},React.createElement(c.ToggleControl,{label:(0,e.__)("Please confirm this image is decorative","block-accessibility-checks"),checked:n,onChange:function(e){return s({isDecorative:e})}}))),React.createElement(i,t))}}),"addImageInspectorControls");(0,i.addFilter)("editor.BlockEdit","block-accessibility-checks/add-inspector-control",r);const s=window.wp.plugins,n=window.wp.data,o=window.wp.element;var l=BlockAccessibilityChecks.blockChecksOptions.coreHeadingBlockCheck;function d(i){if("core/heading"===i.name&&1===i.attributes.level){var t={isValid:!0,message:"",clientId:i.clientId,mode:l};switch(l){case"error":t.isValid=!1,t.message=(0,e.__)("Accessibility Error: Level 1 headings are not allowed in your content area.","block-accessibility-checks");break;case"warning":t.isValid=!1,t.message=(0,e.__)("Warning: Level 1 headings are discouraged in your content area.","block-accessibility-checks");break;default:t.isValid=!0}return t}return{isValid:!0,mode:"none"}}var b=BlockAccessibilityChecks.blockChecksOptions.coreTableBlockCheck;function u(i){if("core/table"===i.name&&0!==i.attributes.body.length&&0===i.attributes.head.length){var t={isValid:!0,message:"",clientId:i.clientId,mode:b};switch(b){case"error":t.isValid=!1,t.message=(0,e.__)("Accessibility Error: Tables are required to have a header row.","block-accessibility-checks");break;case"warning":t.isValid=!1,t.message=(0,e.__)("Warning: It is recommended that tables have a header row.","block-accessibility-checks");break;default:t.isValid=!0}return console.log("table mode:",b),console.log("table isValid:",t.isValid),t}return{isValid:!0,mode:"none"}}var m=(0,t.createHigherOrderComponent)((function(i){return function(t){var a=t.name,c=t.attributes,r=t.clientId,s={isValid:!0,mode:"none",message:""};switch(a){case"core/heading":s=d({name:a,attributes:c,clientId:r});break;case"core/table":s=u({name:a,attributes:c,clientId:r});break;default:s={isValid:!0,mode:"none",message:""}}if("none"===s.mode||s.isValid)return React.createElement(i,t);var n="error"===s.mode?"a11y-block-error":"a11y-block-warning",o=s.message||("error"===s.mode?(0,e.__)("Accessibility Error: This block does not meet accessibility standards.","block-accessibility-checks"):(0,e.__)("Accessibility Warning: This block may have accessibility issues.","block-accessibility-checks"));return React.createElement("div",{className:n},React.createElement("p",{className:"error"===s.mode?"a11y-error-msg":"a11y-warning-msg"},o),React.createElement(i,t))}}),"withErrorHandling");wp.hooks.addFilter("editor.BlockEdit","block-accessibility-checks/with-error-handling",m);var k=[d,u];(0,s.registerPlugin)("block-validation",{render:function(){var e=(0,n.useSelect)((function(e){return e("core/block-editor").getBlocks()}),[]).flatMap((function(e){return k.map((function(i){return i(e)}))})).filter((function(e){return!e.isValid})),i=(0,n.useDispatch)("core/editor"),t=i.lockPostSaving,a=i.unlockPostSaving,c=i.lockPostAutosaving,r=i.unlockPostAutosaving,s=i.disablePublishSidebar,l=i.enablePublishSidebar;return(0,o.useEffect)((function(){e.some((function(e){return"error"===e.mode}))?(t(),c(),s()):(a(),r(),l())}),[e,s,l,c,t,r,a]),null}})})();