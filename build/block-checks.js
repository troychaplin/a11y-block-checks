(()=>{"use strict";const e=window.wp.i18n,i=window.wp.hooks,t=window.wp.compose,c=window.wp.blockEditor,a=window.wp.components;(0,i.addFilter)("blocks.registerBlockType","block-accessibility-checks/add-image-attribute",(function(e){return"core/image"!==e.name||(e.attributes=Object.assign(e.attributes,{isDecorative:{type:"boolean",default:!1}})),e}));var s=(0,t.createHigherOrderComponent)((function(i){return function(t){if("core/image"!==t.name)return React.createElement(i,t);var s=t.attributes,n=t.setAttributes,r=s.isDecorative;return React.createElement(React.Fragment,null,React.createElement(c.InspectorControls,null,React.createElement(a.PanelBody,{title:(0,e.__)("Accessibility Settings","block-accessibility-checks"),initialOpen:!0},React.createElement(a.ToggleControl,{label:(0,e.__)("Please confirm this image is decorative","block-accessibility-checks"),checked:r,onChange:function(e){return n({isDecorative:e})}}))),React.createElement(i,t))}}),"addImageInspectorControls");(0,i.addFilter)("editor.BlockEdit","block-accessibility-checks/add-inspector-control",s);const n=window.wp.plugins;var r="none",o="error",l=o;const d=window.wp.data,u=window.wp.element;var b=BlockAccessibilityChecks.blockChecksOptions.coreHeadingBlockCheck;function k(i){if("core/heading"===i.name&&1===i.attributes.level){var t={isValid:!0,message:"",clientId:i.clientId,mode:b};switch(b){case"error":t.isValid=!1,t.message=(0,e.__)("Accessibility Error: Level 1 headings are not allowed in your content area.","block-accessibility-checks");break;case"warning":t.isValid=!1,t.message=(0,e.__)("Warning: Level 1 headings are discouraged in your content area.","block-accessibility-checks");break;default:t.isValid=!0}return console.log("heading mode:",b),console.log("heading isValid:",t.isValid),t}return{isValid:!0,mode:"none"}}var m=o,g=(0,t.createHigherOrderComponent)((function(i){return function(t){var c=t.name,a=t.attributes,s=t.clientId,n={isValid:!0,mode:l,message:""};switch(c){case"core/heading":n=k({name:c,attributes:a,clientId:s});break;case"core/image":n=function(i){if("core/image"===i.name&&!i.attributes.alt&&!i.attributes.isDecorative){var t={isValid:!0,message:"",clientId:i.clientId,mode:m};switch(m){case"warning":t.isValid=!1,t.message=(0,e.__)("Accessibility Warning: Images without alternative text are discouraged in your content area.","block-accessibility-checks");break;case o:t.isValid=!1,t.message=(0,e.__)("Accessibility Error: Images are required to have alternative text.","block-accessibility-checks");break;default:t.isValid=!0}return t}return{isValid:!0,mode:r}}({name:c,attributes:a,clientId:s});break;default:n={isValid:!0,mode:l,message:""}}if(n.mode===r||n.isValid)return React.createElement(i,t);var d=n.mode===o?"a11y-block-error":"a11y-block-warning",u=n.message||(n.mode===o?(0,e.__)("Accessibility Error: This block does not meet accessibility standards.","block-accessibility-checks"):(0,e.__)("Accessibility Warning: This block may have accessibility issues.","block-accessibility-checks"));return React.createElement("div",{className:d},React.createElement("p",{className:n.mode===o?"a11y-error-msg":"a11y-warning-msg"},u),React.createElement(i,t))}}),"withErrorHandling");wp.hooks.addFilter("editor.BlockEdit","block-accessibility-checks/with-error-handling",g);var h=[k];(0,n.registerPlugin)("block-validation",{render:function(){var e=(0,d.useSelect)((function(e){return e("core/block-editor").getBlocks()}),[]).flatMap((function(e){return h.map((function(i){return i(e)}))})).filter((function(e){return!e.isValid})),i=(0,d.useDispatch)("core/editor"),t=i.lockPostSaving,c=i.unlockPostSaving,a=i.lockPostAutosaving,s=i.unlockPostAutosaving,n=i.disablePublishSidebar,r=i.enablePublishSidebar;return(0,u.useEffect)((function(){e.some((function(e){return e.mode===o}))&&"DENY"===blockAccessibilitySettings.mode?(t(),a(),n()):(c(),s(),r())}),[e,n,r,a,t,s,c]),null}}),document.addEventListener("DOMContentLoaded",(function(){"undefined"!=typeof BlockAccessibilityChecks?console.log("Block Checks Options:",BlockAccessibilityChecks.blockChecksOptions):console.error("BlockAccessibilityChecks is not defined.")}))})();